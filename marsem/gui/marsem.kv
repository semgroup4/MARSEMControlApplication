<ScreenManagement>:
    HomeScreen:
    SettingsScreen:
    PhotoScreen:

<PhotoScreen>:
    name: 'Photo'

<HomeScreen>:
    name: 'HomeScreen'
    DropDown:
    CustomLayout:
        Button:
            id: menu_button
            pos: root.width-self.width-35, root.height-self.height*2+self.height/2
            size: 100, 50
            text: 'Menu'
            on_release: dropdown.open(self)
        Button:
            id: menu_button
            pos: root.width-self.width-35-self.width, root.height-self.height*2+self.height/2
            size: 100, 50
            text: 'Settings'
            on_release: app.root.current = "Settings"
        StartButton:
            pos: self.width/2, self.height/2
            size: 100, 100
            text: 'Start'
            on_release: self.start()
        PhotoProgress:
            pos: 200, 50
            size: root.width-250, 10
        VideoStream:
        Menu:
            id: menu
            DropDown:
                id: dropdown
                on_parent: self.dismiss()
                on_select: menu_button.text = '{}'.format(args[1])
                Button:
                    text: 'Pictures'
                    size_hint_y: None
                    height: '48dp'
                    on_release: menu.show_load()
                Button:
                    text: 'Save'
                    size_hint_y: None
                    height: '48dp'
                    on_release: menu.show_save()
                Button:
                    text: 'Settings'
                    size_hint_y: None
                    height: '48dp'
                    on_release: app.open_settings()
                Button:
                    text: 'Quit'
                    size_hint_y: None
                    height: '48dp'
                    on_release: app.get_running_app().stop()


<LoadDialog>:
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Load"
                on_release: root.load(filechooser.path, filechooser.selection)

<SaveDialog>:
    text_input: text_input
    BoxLayout:
        size: root.size
        pos: root.pos
        orientation: "vertical"
        FileChooserListView:
            id: filechooser
            on_selection: text_input.text = self.selection and self.selection[0] or ''

        TextInput:
            id: text_input
            size_hint_y: None
            height: 30
            multiline: False

        BoxLayout:
            size_hint_y: None
            height: 30
            Button:
                text: "Cancel"
                on_release: root.cancel()

            Button:
                text: "Save"
                on_release: root.save(filechooser.path, text_input.text)
