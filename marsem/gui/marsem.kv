#import fileChooser

<ScreenManagement>:
    HomeScreen:
    SettingsScreen:
    PhotoScreen:
    PhotoViewer:

<SettingsScreen>:
    name: "Settings"
    CustomLayout:
        Button:
            size: 100, 100
            text: 'Home'
            on_release: app.root.current = "HomeScreen"
<PhotoScreen>:
    name: 'Photo'
    CustomLayout:
        FileChooserIconView:
            pos: root.width-self.width, root.height-self.height*1.7+self.height/2
            size: root.size
            on_selection: root.loadImage(self)
            filters: ['*.png']

<PhotoViewer>:
    name: 'PhotoViewer'
    on_enter: root.showImages()
    CustomLayout:
        StackLayout:
            size: root.size
            pos: root.width-self.width, root.height-self.height*1.7+self.height/2

<HomeScreen>:
    name: "HomeScreen"
    CustomLayout:
        StartButton:
            pos: self.width/2, self.height/2
            size: 100, 100
            text: 'Start'
            on_release: self.start()
        PhotoProgress:
            pos: 200, 50
            size: root.width-250, 10

<Menu>:
    BoxLayout:
        pos: root.width-self.width+470, root.height-self.height*2+self.height*6.2
        size: 100, 50
        Button:
            text: 'Pictures'
            size: 75, 50
            size_hint: None,None
            height: '48dp'
            on_release: app.root.current = 'Photo'

        Button:
            text: 'Settings'
            size: 75, 50
            size_hint: None,None
            height: '48dp'
            on_release: app.open_settings()
        Button:
            text: 'Quit'
            size: 75, 50
            size_hint: None,None
            height: '48dp'
            on_release: app.get_running_app().stop()
        Button:
            text: 'Photos'
            size: 75, 50
            size_hint: None,None
            height: '48dp'
            on_release: app.root.current = 'PhotoViewer'

# This is the layout template used for all screens of the application.
<CustomLayout>:
    # Changes background. Needs 'before' so that the rectangle is rendered prior to widgets.
    canvas.before:
        Color:
            rgba: 0.251, 0.247, 0.243, 1
        Rectangle:
            pos: self.pos
            size: self.size

    # Header for each screen.
    Label:
        text: 'MARSEM'
        font_size: 50
        pos: self.width, root.height-root.height/6
    # Visual traits such as the line below the header goes here.
    Decorations:
        canvas:
            Color:
                rgba: 0.945, 0.945, 0.945, 1
            Line:
                points: 35, root.height-root.height/7, root.width-35, root.height-root.height/7
                width: 2
    Menu:
